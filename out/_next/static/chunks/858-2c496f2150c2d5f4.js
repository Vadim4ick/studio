"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{4839:function(e,t,r){function a(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(a=e(t[r]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{W:function(){return a}}),t.Z=a},4674:function(e,t,r){let a,n;function i(e,t){for(let r in e)t(e[r],r)}function o(e,t){e.forEach(t)}function l(e,t,r){if(!e)throw Error(`${r?r+": ":""}${t}`)}function s({node:e=[],from:t,source:r,parent:a=t||r,to:n,target:i,child:l=n||i,scope:s={},meta:f={},family:d={type:"regular"},regional:u}={}){let p=X(a),c=X(d.links),m=X(d.owners),h=[];o(e,e=>e&&V(h,e));let g={id:Z(),seq:h,next:X(l),meta:f,scope:s,family:{type:d.type||"crosslink",links:c,owners:m}};return o(c,e=>V($(e),g)),o(m,e=>V(x(e),g)),o(p,e=>V(e.next,g)),u&&H&&U(N(H),[g]),g}function f(e,t,r){let a,i,l,s,f,d,u,p=eI,c=null,m=eA;if(e.target&&(t=e.params,r=e.defer,u=e.meta,p="page"in e?e.page:p,e.stack&&(c=e.stack),m=M(e)||m,e=e.target),m&&eA&&m!==eA&&(eA=null),Array.isArray(e))for(let r=0;r<e.length;r++)eN("pure",p,w(e[r]),c,t[r],m,u);else eN("pure",p,w(e),c,t,m,u);if(r&&!eq)return;let h={isRoot:eq,currentPage:eI,scope:eA,isWatch:eR,isPure:eF};eq=0;e:for(;s=eS();){let{idx:e,stack:t,type:r}=s;l=t.node,eI=f=t.page,eA=M(t),f?d=f.reg:eA&&(d=eA.reg);let u=!!f,p=!!eA,c={fail:0,scope:l.scope};a=i=0;for(let n=e;n<l.seq.length&&!a;n++){let o=l.seq[n];if(o.order){let{priority:a,barrierID:i}=o.order,l=i?f?`${f.fullID}_${i}`:i:0;if(n!==e||r!==a){i?eM.has(l)||(eM.add(l),ez(n,t,a,i)):ez(n,t,a,0);continue e}i&&eM.delete(l)}switch(o.type){case"mov":{let e;let r=o.data;switch(r.from){case"stack":e=N(t);break;case"a":case"b":e=t[r.from];break;case"value":e=r.store;break;case"store":if(d&&!d[r.store.id]){if(u){let e=e_(f,r.store.id);t.page=f=e,e?d=e.reg:p?(eP(eA,r.store,0,1,r.softRead),d=eA.reg):d=void 0}else p&&eP(eA,r.store,0,1,r.softRead)}e=ey(d&&d[r.store.id]||r.store)}switch(r.to){case"stack":t.value=e;break;case"a":case"b":t[r.to]=e;break;case"store":ej(f,eA,r.target,0).current=e}break}case"compute":let s=o.data;if(s.fn){eR="watch"===l.meta.op,eF=s.pure;let e=s.safe?(0,s.fn)(N(t),c.scope,t):eV(c,s.fn,t);s.filter?i=!e:t.value=e,eR=h.isWatch,eF=h.isPure}}a=c.fail||i}if(n&&n(t,c),!a){let e=N(t),r=M(t);if(o(l.next,a=>{eN("child",f,a,t,e,r)}),r){l.meta.needFxCounter&&eN("child",f,r.fxCount,t,e,r),l.meta.storeChange&&eN("child",f,r.storeChange,t,e,r),l.meta.warnSerialize&&eN("child",f,r.warnSerializeNode,t,e,r);let a=r.additionalLinks[l.id];a&&o(a,a=>{eN("child",f,a,t,e,r)})}}}eq=h.isRoot,eI=h.currentPage,eA=M(h)}function d(e,t){if(!t||!t.name&&!t.named&&!t.loc)return e;let r=`[${e}]`,a=t.named||t.name;a&&(r+=` unit '${a}'`);let n=t.loc;return!a&&n&&(r+=` (${n.file}:${n.line}:${n.column})`),r}function u(e){let t=()=>e();return t.unsubscribe=()=>e(),t}function p(e,...t){let r=K();if(r){let a=r.handlers[e];if(a)return a(r,...t)}}function c(e,t){let r=eW({or:t,and:"string"==typeof e?{name:e}:e}),a=d("event",r),n=(e,...t)=>(l(!A(n,"derived"),"call of derived event is not supported, use createEvent instead",a),l(!eF,"unit call from pure function is not supported, use operators like sample instead",a),eI?((e,t,r,a)=>{let n=eI,i=null;if(t)for(i=eI;i&&i.template!==t;)i=C(i);eE(i);let o=e.create(r,a);return eE(n),o})(n,i,e,t):n.create(e,t)),i=K(),o=Object.assign(n,{graphite:s({meta:eQ(r.actualOp||"event",n,r),regional:1}),create:e=>(f({target:n,params:e,scope:eA}),e),watch:e=>eJ(n,e),map:e=>eU(n,"map",e,[eh()]),filter:e=>eU(n,"filter",e.fn?e:e.fn,[eh(el,1)]),filterMap:e=>eU(n,"filterMap",e,[eh(),ec(e=>!et(e),1)]),prepend(e){l(n.targetable,".prepend of derived event is not supported, call source event instead",a);let t=c("* â†’ "+n.shortName,{parent:C(n)});return p("eventPrepend",w(t)),eH(t,n,[eh()],"prepend",e),eK(n,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(o),q(o,"id",o.graphite.id),J(o.graphite),o}function m(e,t,r,a,n){return en(r,`${n} ${t}`,"first argument"),l(ee(a),"second argument should be a function",n),W(!A(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`,n),o(Array.isArray(r)?r:[r],t=>{e.off(t),z(e).set(t,eG(eY(t,e,"on",eo,a)))}),e}function h(e,t){let r=eW(t),a=ev(e),n=d("store",r),i=c({named:"updates",derived:1});p("storeBase",a);let u=a.id,g="skipVoid"in r,v=g&&!r.skipVoid;W(!(g&&r.skipVoid),"{skipVoid: true}","updateFilter",n);let y={subscribers:new Map,updates:i,defaultState:e,stateRef:a,getState(){let e,t=a;if(eI){let t=eI;for(;t&&!t.reg[u];)t=C(t);t&&(e=t)}return!e&&eA&&(eP(eA,a,1),e=eA),e&&(t=e.reg[u]),ey(t)},setState:e=>f({target:y,params:e,defer:1,scope:eA}),reset:(...e)=>(l(y.targetable,".reset of derived store is not supported",n),o(e,e=>m(y,".reset",e,()=>y.defaultState,n)),y),on:(e,t)=>(l(y.targetable,".on of derived store is not supported",n),m(y,".on",e,t,n)),off(e){let t=z(y).get(e);return t&&(t(),z(y).delete(e)),y},map(e,t){let r,n;Y(e)&&(r=e,e=e.fn);let i=y.getState(),o=et(i);K()?n=null:(!o||o&&v)&&(n=e(i));let l=h(n,{name:`${y.shortName} \u2192 *`,derived:1,...t,and:r}),s=eY(y,l,"map",el,e);return eb(S(l),{type:"map",fn:e,from:a}),S(l).noInit=1,p("storeMap",a,s),l},watch(e,t){if(W(!t,"watch second argument","sample",n),!t||!F(e)){let t=eJ(y,e);return p("storeWatch",a,e)||e(y.getState()),t}return l(ee(t),"second argument should be a function",n),e.watch(e=>t(y.getState(),e))}},b=eQ("store",y,r),k=y.defaultConfig.updateFilter;y.graphite=s({scope:{state:a,fn:k},node:[ec((e,t,r)=>(r.scope&&!r.scope.reg[a.id]&&(r.b=1),e)),em(a),ec((e,t,{a:r,b:a})=>{let i=et(e);return i&&!g&&console.error(`${n}: ${eX}`),(i&&v||!i)&&(e!==r||a)},1),k&&eh(ei,1),ed({from:"stack",target:a})],child:i,meta:{...b,defaultState:e},regional:1}),q(y,"id",y.graphite.id),q(y,"rootStateRefId",u);let w=A(y,"serialize"),$=A(y,"derived"),x=A(y,"sid");x&&(q(y,"storeChange",1),a.sid=x),x||"ignore"===w||$||q(y,"warnSerialize",1);let N=et(e);return l($||!N||N&&v,eX,n),$&&N&&!g&&console.error(`${n}: ${eX}`),U(y,[i]),null!=r&&r.domain&&r.domain.hooks.store(y),$||(y.reinit=c({named:"reinit"}),y.reset(y.reinit)),a.meta=y.graphite.meta,J(y.graphite),y}function g(e,t={}){let r=eW(ee(e)?{handler:e}:e,t),a=d("effect",r),n=c(ee(e)?{handler:e}:e,{...t,actualOp:"effect"}),i=w(n);q(i,"op",n.kind="effect"),n.use=e=>(l(ee(e),".use argument should be a function",a),v.scope.handler=e,n),n.use.getCurrent=()=>v.scope.handler;let o=n.finally=c({named:"finally",derived:1}),u=n.done=o.filterMap({named:"done",fn({status:e,params:t,result:r}){if("done"===e)return{params:t,result:r}}}),p=n.fail=o.filterMap({named:"fail",fn({status:e,params:t,error:r}){if("fail"===e)return{params:t,error:r}}}),m=n.doneData=u.map({named:"doneData",fn:({result:e})=>e}),g=n.failData=p.map({named:"failData",fn:({error:e})=>e}),v=s({scope:{handler:n.defaultConfig.handler||(()=>l(0,`no handler used in ${n.compositeName.fullName}`))},node:[ec((e,t,r)=>{let a=t.handler,i=M(r);if(i){let e=i.handlers.unitMap.get(n)||i.handlers.sidMap[n.sid];e&&(a=e)}return e.handler=a,e},0,1),ec((e,t,r)=>{if(t.runnerFn&&!t.runnerFn(e,null,r))return;let{params:a,req:n,handler:i,args:l=[a]}=e,s=e0(a,n,1,o,r),f=e0(a,n,0,o,r),[d,u]=e1(i,f,l);d&&(Y(u)&&ee(u.then)?u.then(s,f):s(u))},0,1)],meta:{op:"fx",fx:"runner"}});i.scope.runner=v,V(i.seq,ec((e,{runner:t},r)=>{let a=C(r)?{params:e,req:{rs(e){},rj(e){}}}:e;return r.meta||(r.meta={fxID:G()}),f({target:t,params:a,defer:1,scope:M(r),meta:r.meta}),a.params})),n.create=e=>{let t=function(){let e={};return e.req=new Promise((t,r)=>{e.rs=t,e.rj=r}),e.req.catch(()=>{}),e}();if(eA&&!eR){let e=eA;t.req.finally(()=>{eD(e)}).catch(()=>{})}return f({target:n,params:{params:e,req:t},scope:eA}),t.req};let y=n.inFlight=h(0,{serialize:"ignore",named:(A(n,"name")||n.graphite.id)+".inFlight"}).on(n,e=>e+1).on(o,e=>e-1).map({fn:e=>e,named:"inFlight"});q(o,"needFxCounter","dec"),q(n,"needFxCounter",1);let b=n.pending=y.map({fn:e=>e>0,named:"pending"});return U(n,[o,u,p,m,g,b,y]),null!=r&&r.domain&&r.domain.hooks.effect(n),n}function v(e,t){let r=eW({or:t,and:"string"==typeof e?{name:e}:e}),a=s({family:{type:"domain"},regional:1,parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent)}),n={history:{},graphite:a,hooks:{}};a.meta=eQ("domain",n,{parent:(null==r?void 0:r.domain)||(null==r?void 0:r.parent),or:{...r,derived:1}}),i({Event:c,Effect:g,Store:h,Domain:v},(e,t)=>{let r=t.toLowerCase(),a=c({named:`on${t}`});n.hooks[r]=a;let i=new Set;n.history[`${r}s`]=i,a.create=e=>(f(a,e),e),V(w(a).seq,ec((e,t,r)=>(r.scope=null,e))),a.watch(e=>{U(n,[e]),i.add(e),e.ownerSet||(e.ownerSet=i),C(e)||(e.parent=n)}),U(n,[a]),n[`onCreate${t}`]=e=>(o(i,e),a.watch(e)),n[`create${t}`]=n[r]=(t,r)=>{let i=eW({and:r,or:t});return null!=i&&i.domain?e(t,r):a(e(t,{parent:n,or:i}))}});let l=C(n);return l&&i(n.hooks,(e,t)=>eH(e,l.hooks[t])),null!=r&&r.domain&&r.domain.hooks.domain(n),n}function y(e,{scope:t,safe:r}={}){l(t||eA||r,"scopeBind: scope not found");let a=t||eA;return t=>{function r(){eD(o)}let n,i=0,o=eA;eD(a);try{n=e(t)}catch(e){n=e,i=1}if(r(),i)throw n;return n instanceof Promise&&n.then(r,r),n}}function b({unit:e,fn:t,scope:r,batch:a}){let n=[eg.run({fn:e=>t(e)})];a&&n.unshift(eg.compute({priority:"sampler",batch:1})),D(e)&&n.unshift(eg.mov({store:e.stateRef,to:"stack"}));let i=Array.isArray(e)?e:[e];if(r){let e=[],t=r.additionalLinks;return i.forEach(r=>{let a=t[r.graphite.id]||[];t[r.graphite.id]=a;let i=s({node:D(r)?[eg.mov({store:r.stateRef,to:"stack"}),...n]:n,meta:{watchOp:r.kind}});a.push(i),e.push(()=>{let e=a.indexOf(i);-1!==e&&a.splice(e,1),eZ(i)})}),u(()=>{e.forEach(e=>e())})}{let e=s({node:n,parent:i,family:{owners:i}});return u(()=>{eZ(e)})}}r.d(t,{Fj:function(){return v},WC:function(){return y},bv:function(){return b},is:function(){return O}});let k="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",w=e=>e.graphite||e,$=e=>e.family.owners,x=e=>e.family.links,S=e=>e.stateRef,N=e=>e.value,z=e=>e.subscribers,C=e=>e.parent,M=e=>e.scope,A=(e,t)=>w(e).meta[t],q=(e,t,r)=>w(e).meta[t]=r,R=e=>e.compositeName,F=e=>(ee(e)||Y(e))&&"kind"in e,I=e=>t=>F(t)&&t.kind===e,D=I("store"),E=I("event"),_=I("effect"),j=I("domain");var O={__proto__:null,unit:F,store:D,event:E,effect:_,targetable:e=>F(e)&&!!e.targetable,domain:j,scope:I("scope"),attached:e=>_(e)&&1==A(e,"attached")};let P=(e,t)=>{let r=e.indexOf(t);-1!==r&&e.splice(r,1)},V=(e,t)=>e.push(t),W=(e,t,r,a)=>!e&&console.error(`${a?a+": ":""}${t} is deprecated${r?`, use ${r} instead`:""}`),T=()=>{let e=0;return()=>""+ ++e},L=T(),B=T(),Z=T(),G=T(),H=null,J=e=>{a&&a(e,H)},K=()=>H&&H.template,Q=e=>(e&&H&&H.sidRoot&&(e=`${H.sidRoot}|${e}`),e),U=(e,t)=>{let r=w(e);o(t,e=>{let t=w(e);"domain"!==r.family.type&&(t.family.type="crosslink"),V($(t),r),V(x(r),t)})},X=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(w),Y=e=>"object"==typeof e&&null!==e,ee=e=>"function"==typeof e,et=e=>void 0===e,er=e=>l(Y(e)||ee(e),"expect first argument be an object"),ea=(e,t,r,a)=>l(!(!Y(e)&&!ee(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${a}`),en=(e,t,r)=>{Array.isArray(e)?o(e,(e,a)=>ea(e,t,`${a} item of ${r}`,"")):ea(e,t,r," or array of units")},ei=(e,{fn:t},{a:r})=>t(e,r),eo=(e,{fn:t},{a:r})=>t(r,e),el=(e,{fn:t})=>t(e),es=(e,t,r,a)=>{let n={id:B(),type:e,data:t};return r&&(n.order={priority:r},a&&(n.order.barrierID=++ef)),n},ef=0,ed=({from:e="store",store:t,target:r,to:a=r?"store":"stack",batch:n,priority:i})=>es("mov",{from:e,store:t,to:a,target:r},i,n),eu=({fn:e,batch:t,priority:r,safe:a=0,filter:n=0,pure:i=0})=>es("compute",{fn:e,safe:a,filter:n,pure:i},r,t),ep=({fn:e})=>eu({fn:e,priority:"effect"}),ec=(e,t,r)=>eu({fn:e,safe:1,filter:t,priority:r&&"effect"}),em=(e,t,r)=>ed({store:e,to:t?"stack":"a",priority:r&&"sampler",batch:1}),eh=(e=el,t)=>eu({fn:e,pure:1,filter:t}),eg={mov:ed,compute:eu,run:ep},ev=e=>({id:B(),current:e,initial:e}),ey=({current:e})=>e,eb=(e,t)=>{e.before||(e.before=[]),V(e.before,t)},ek=null,ew=(e,t)=>{let r;return e?(t&&((e.v.type===t.v.type&&e.v.id>t.v.id||eC(e.v.type)>eC(t.v.type))&&(r=e,e=t,t=r),r=ew(e.r,t),e.r=e.l,e.l=r),e):t},e$=[],ex=0;for(;ex<6;)V(e$,{first:null,last:null,size:0}),ex+=1;let eS=()=>{for(let e=0;e<6;e++){let t=e$[e];if(t.size>0){if(3===e||4===e){t.size-=1;let e=ek.v;return ek=ew(ek.l,ek.r),e}1===t.size&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},eN=(e,t,r,a,n,i,o)=>ez(0,{a:null,b:null,node:r,parent:a,value:n,page:t,scope:i,meta:o},e,0),ez=(e,t,r,a)=>{let n=eC(r),i=e$[n],o={v:{idx:e,stack:t,type:r,id:a},l:null,r:null};3===n||4===n?ek=ew(ek,o):(0===i.size?i.first=o:i.last.r=o,i.last=o),i.size+=1},eC=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return -1}},eM=new Set,eA,eq=1,eR=0,eF=0,eI=null,eD=e=>{eA=e},eE=e=>{eI=e},e_=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=e.parent;if(e)return e}return null},ej=(e,t,r,a)=>{let n=e_(e,r.id);return n?n.reg[r.id]:t?(eP(t,r,a),t.reg[r.id]):r},eO=e=>e,eP=(e,t,r,a,n)=>{let i=e.reg;if(i[t.id])return;let l=t.sid,s={id:t.id,current:t.initial,meta:t.meta};if(s.id in e.values.idMap)s.current=e.values.idMap[s.id];else if(l&&l in e.values.sidMap&&!(l in e.sidIdMap)){var f;let r=null==t||null===(f=t.meta)||void 0===f?void 0:f.serialize;s.current=(e.fromSerialize&&"ignore"!==r&&(null==r?void 0:r.read)||eO)(e.values.sidMap[l])}else if(t.before&&!n){let n=0,l=r||!t.noInit||a;o(t.before,t=>{switch(t.type){case"map":{let n=t.from;if((n||t.fn)&&(n&&eP(e,n,r,a),l)){let e=n&&i[n.id].current;s.current=t.fn?t.fn(e):e}break}case"field":eP(e,t.from,r,a),n||(n=1,s.current=Array.isArray(s.current)?[...s.current]:{...s.current}),l&&(s.current[t.field]=i[i[t.from.id].id].current)}})}l&&(e.sidIdMap[l]=t.id),i[t.id]=s},eV=(e,t,r)=>{try{return t(N(r),e.scope,r)}catch(t){console.error(t),e.fail=1,e.failReason=t}},eW=(e,t={})=>(Y(e)&&(eW(e.or,t),i(e,(e,r)=>{et(e)||"or"===r||"and"===r||(t[r]=e)}),eW(e.and,t)),t),eT=(e,t)=>{P(e.next,t),P($(e),t),P(x(e),t)},eL=(e,t,r)=>{let a;e.next.length=0,e.seq.length=0,e.scope=null;let n=x(e);for(;a=n.pop();)eT(a,e),(t||r&&"sample"!==e.meta.op||"crosslink"===a.family.type)&&eL(a,t,"on"!==a.meta.op&&r);for(n=$(e);a=n.pop();)eT(a,e),r&&"crosslink"===a.family.type&&eL(a,t,"on"!==a.meta.op&&r)},eB=e=>e.clear(),eZ=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),D(e))eB(z(e));else if(j(e)){r=1;let t=e.history;eB(t.events),eB(t.effects),eB(t.stores),eB(t.domains)}eL(w(e),!!t,r)},eG=e=>u(()=>eZ(e)),eH=(e,t,r,a,n)=>s({node:r,parent:e,child:t,scope:{fn:n},meta:{op:a},family:{owners:[e,t],links:t},regional:1}),eJ=(e,t)=>(l(ee(t),".watch argument should be a function"),eG(s({scope:{fn:t},node:[ep({fn:el})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),eK=(e,t,r="event")=>{C(e)&&C(e).hooks[r](t)},eQ=(e,t,r)=>{let a=eW(r),n="domain"===e,i=L(),{sid:o=null,named:l=null,domain:s=null,parent:f=s}=a,d=l||a.name||(n?"":i),u=function(e,t){let r,a;if(t){let n=R(t);0===e.length?(r=n.path,a=n.fullName):(r=n.path.concat([e]),a=0===n.fullName.length?e:n.fullName+"/"+e)}else r=0===e.length?[]:[e],a=e;return{shortName:e,fullName:a,path:r}}(d,f),p={op:t.kind=e,name:t.shortName=d,sid:t.sid=Q(o),named:l,unitId:t.id=i,serialize:a.serialize,derived:a.derived,config:a};if(t.targetable=!a.derived,t.parent=f,t.compositeName=u,t.defaultConfig=a,t.getType=()=>(W(0,"getType","compositeName.fullName"),u.fullName),!n){t.subscribe=e=>(er(e),t.watch(ee(e)?e:t=>e.next&&e.next(t))),t[k]=()=>t;let e=K();e&&(p.nativeTemplate=e)}return p},eU=(e,t,r,a)=>{let n;Y(r)&&(n=r,r=r.fn);let i=c({name:`${e.shortName} \u2192 *`,derived:1,and:n});return eH(e,i,a,t,r),i},eX="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",eY=(e,t,r,a,n)=>{let i=S(t),o=ed({store:i,to:"a",priority:"read"});"map"===r&&(o.data.softRead=1);let l=[o,eh(a)];return p("storeOnMap",i,l,D(e)&&S(e)),eH(e,t,l,r,n)},e1=(e,t,r)=>{try{return[1,e(...r)]}catch(e){return t(e),[0,null]}},e0=(e,t,r,a,n)=>i=>{f({target:[a,e4],params:[r?{status:"done",params:e,result:i}:{status:"fail",params:e,error:i},{value:i,fn:r?t.rs:t.rj}],defer:1,page:n.page,scope:n.scope,meta:n.meta})},e4=s({node:[ep({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}})}}]);